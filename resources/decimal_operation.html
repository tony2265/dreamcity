<!DOCTYPE HTML>
<!--
	Fractal by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="zh-Hant-TW">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76542419-5"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-76542419-5');

    </script>

    <title>Dreamcity</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="Shortcut Icon" type="image/x-icon" href="../images/logo.ico" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" />
    </noscript>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">


    <meta name="keywords" content="minecraft 地圖,minecraft地圖,rpg,麥塊地圖,pve,minecraft rpg地圖,minecraft 生存地圖,創世神地圖,島國勇者,minecraft地圖下載,過五關斬六將,minecraft 地圖下載,麥塊 地圖,minecraft大型生存地圖,minecraft 解謎地圖,創世神 地圖,minecraft生存地圖,mc地圖,夢想之都,賣快地圖,minecraft冒險地圖,minecraft ctm,地圖minecraft,minecraft 多人地圖,ctm minecraft,minecraft解謎地圖,地圖 minecraft,minecraft pvp地圖,mc 地圖,解謎地圖,minecraft 地圖推薦,島國,minecraft多人rpg地圖,生存地圖,minecraft map 巴哈,minecraft多人地圖,minecraft多人解謎地圖,minecraft rpg生存地圖,魏滅蜀之戰,科洛維亞大陸ii,minecraft rpg 地圖,minecraft 解謎,麥塊地圖下載,minecraft 雙人地圖,minecraft 冒險地圖,賣快 地圖,minecraft ctm地圖,minecraft雙人解謎地圖,minecraft pve地圖,ctm地圖,我的世界地圖,地圖,minecraft 單人地圖,1.12.2 地圖,絕界行,minecraft rpg map,minecraft解謎地圖多人,minecraft 伺服器,minecraft 推薦地圖,minecraft 1.16.1 地圖,minecraft 1.12.2 地圖,minecraft 生存,麥快地圖,minecraft 大型生存地圖,夢都,1.16.1 地圖,minecraft地圖推薦,minecraft 地圖 下載,科洛維亞,rpg地圖,minecraft雙人地圖,minecraft恐怖解謎地圖,pvp pve,ㄇㄞˉ塊地圖,minecraft 島國勇者,麥塊生存地圖,minecraft rpg冒險地圖,minecraft server權限設定,島國勇者 攻略,當個創世神 地圖,麥塊 地圖下載,minecraft ctm地圖下載,minecraft 解謎地圖 多人,minecraft大型rpg地圖,夢想之都 minecraft,minecraft 地图,pvp地圖,minecraft 多人rpg地圖,詛咒之冬,minecraft ctm map,minecraft 好玩地圖,minecraft 地圖 推薦,我的世界 地圖" />

</head>

<body class="is-preload">
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v9.0" nonce="nJ98gqPH"></script>


    <!-- Header -->
    <header id="header" style="background-color:seagreen">
        <!--color-->
        <div class="content">
            <h1><a href="#">如何簡易的實現小數四則運算</a></h1>
            <p>筆者：雪色</p>
            <ul class="actions">
                <!--color-->
                <li><a href="./" class="button primary" style="color: seagreen !important;"><i class="fas fa-scroll"></i>資源分享</a></li>
                <li><a href="../" class="button scrolly"><i class="fas fa-landmark"></i>回到首頁</a></li>
            </ul>
        </div>
    </header>


    <section id="one" class="wrapper">
        <div class="inner">
            <header class="major">
                <h2>如何簡易的實現小數四則運算</h2>
                <h4>指令技術</h4>
                <p>2020/09/01</p>
            </header>
            <section>
                <h4>以下範文皆以生物的Attributes標籤格式為主</h4>
                <p><i>屬性的格式與細則詳見：<a target="_blank" href="https://minecraft-zh.gamepedia.com/index.php?title=属性&variant=zh-tw">連結</a><br>
                        備註：前導資訊內容皆源自此Wiki之內容，並無其餘特殊內容(僅略做統整)，讀者可自行選擇跳過<br>
                        此篇適用於Java Edition 1.14~1.16的版本</i>
                </p>
                <h3>你可以在此篇文章學習到什麼 ?</h3>
                <ol>
                    <li>理解實體的屬性(Attributes)和修飾符(Modifiers)的格式與規則</li>
                    <li>利用attribute指令進行小數點運算(加減乘除)與注意事項</li>
                    <li>如何存取小數運算的結果值</li>
                </ol>
                <hr>
                <h3>前導資訊</h3>
                <h4>Attributes的結構</h4>
                <p>Attributes由2個必要的標籤：Name、Amount，以及1個可選標籤：Modifiers所組成：</p>
                <ol>
                    <li>Name：功用在於指定要控制的目標屬性，如攻擊傷害(attack_damage)、生命值(health)等。</li>
                    <li>Base：為該屬性的基礎值。</li>
                    <li>Modifiers：列出套用加與乘法的修飾符(Modifier)，在下文有更詳細的描述。</li>
                </ol>
                <h4>Modifiers的格式</h4>
                <p>Modifiers由4個必要的標籤組成：Name、Amount、Operation、UUID</p>
                <ol>
                    <li>Name：功用在於方便被指令指定，如：/execute if data entity @s Attributes.Modifiers.[{Name:"sample"}] <br>效果為：檢測自身標籤的Attributes中的Modifiers中是否有Name:"sample"的標籤。</li>
                    <li>Amount：作為當前修飾符的設定值，並依據Operation指定的值來套用指定的計算模式。</li>
                    <li>Operation：用來指定計算的模式，在下方有更詳細的描述。</li>
                    <li>UUID：用來指定當前修飾符的編號(UUID)，在同一個Modifiers中，具有相同UUID的修飾符僅有全部項目中最前面一項的修飾符會被套用。<br></li>
                </ol>
                <pre><code>ex. (1.16) Modifiers:[{Name:"multiply",Amount:0.5,Operation:2,UUID:[I;0,0,0,0]},{Name:"add",Amount:2,Operation:0,UUID:[I;0,0,0,0]}]</code></pre>
                <p>
                    輸出值將等同於「base值*1.5倍」的效果。
                </p>
                <h4>Modifiers的規則</h4>
                <p>Attribute的Modifiers中有三項操作方式(Operation)：<br><i>以下由修飾符所設定的值(Amount)簡稱為「設定值」，且假設base值皆為2.5d</i></p>

                <ul>
                    <li>〔0 | add〕 加上設定值 <br>
                        <pre><code>ex. {Amount:1.35,Operation:0} = 2.5+1.35，總值=3.85 </code></pre>
                    </li>
                    <li>〔1 | multiply_base〕 將屬性值乘上(1+設定值的總和) <br>
                        <pre><code>ex. [{Amount:6.5,Operation:1},{Amount:-3.5,Operation:1}] = 2.5*(1+6.5-3.5)，總值=10</code></pre>
                    </li>
                    <li>〔2 | multiply〕 將屬性值乘上(1+設定值) <br>
                        <pre><code>ex. [{Amount:3,Operation:1},{Amount:2.65,Operation:1}] = 2.5*(1+3)*(1+2.65)，總值=36.5</code></pre>
                    </li>
                </ul>
                <p>在Modifiers中有指定的運算順序規則，Operation:0 -> Operation:1 -> Operation:2 (先->後)</p>
                <pre><code>ex. [{Amount:1.6,Operation:2},{Amount:1.1,Operation:1},{Amount:0.9,Operation:0},{Amount:1.9,Operation:1},{Amount:1.8,Operation:2}] = (2.5+0.9)*(1+1.1+1.9)*(1+1.8)*(1+1.6)，總值=99.008 </code></pre>
                也可以看成：[base+(op0項的總和)]*[1+(op1項的總和)]*(1+op2)*(1+op2)*... <br> <br>
                <pre><code>ex. 一個可行的生物標籤(1.16↑)：Attributes:[{Name:"minecraft:generic.attack_damage",Base:1.8,Modifiers:[{Name:"add",Amount:0.07,Operation:0,UUID:[I;0,0,0,0]}]}]</code></pre>
                <pre><code>ex. 一個可行的生物標籤(1.15↓)：Attributes:[{Name:"minecraft:generic.attackDamage",Base:3.0,Modifiers:[{Name:"multiply",Amount:0.23,Operation:2,UUIDMost:1,UUIDLeast:1}]}]</code></pre>

                <hr>

                <h3>如何進行小數運算與存取結果值</h3>
                <p>每個屬性值會根據修飾符與基礎值(Base)進行運算而得出，進而我們可以利用修飾符與基礎值(Base)的關係來實現「小數運算」。
                </p>
                <h4>(1.16↑)利用attribute指令進行小數運算的做法</h4>
                <p>新版本中加入了attribute指令，這更加便於讓我們針對生物的屬性值(Attributes標籤)進行修改，
                    包含加上數值、乘以數值、取得結算值(get)等。<br>
                    <i>attribute指令格式詳見：<a target="_blank" href="https://minecraft-zh.gamepedia.com/index.php?title=命令/attribute&variant=zh-tw">連結</a></i><br><br>

                    ex. 把自己的armor屬性值加上36.8，<br>
                    可以視同使用指令：/attribute @s minecraft:generic.armor modifier add 0-0-0-0-1 add 36.8 add<br><br>

                    ex. 把自己的armor屬性值乘以2.05，<br>
                    可以視同使用指令：/attribute @s minecraft:generic.armor modifier add 0-0-0-0-2 multiply 1.05 multiply<br><br>

                    ex. 把自己的armor屬性值除以5，<br>
                    可以視同使用指令：/attribute @s minecraft:generic.armor modifier add 0-0-0-0-3 multiply -0.8 multiply
                </p>
                <h4>(1.14↑)利用data modify指令進行小數運算的做法</h4>
                <p>相比attribute的直觀設計，利用data modify的設計較為複雜，但實用性相對較高，是由於data modify有能將其他標籤的數值進行轉移(set from)的功能。<br><i>請注意：玩家的資料幾乎都不能被指令修改<br>
                        以下皆使用1.16版本的格式作範例</i></p>
                <p>ex. 把自己的max_health屬性值改變為：10.9*(1+5.1)=66.49。</p>
                <ol>
                    <li> 設定好Modifiers的路徑：
                        <pre><code>/data merge entity @s {Attributes:[{Name:"minecraft:generic.max_health",Base:8.0d,Modifiers:[{Amount:0,Operation:1,UUID:[I;0,0,0,1],Name:"multiply"}]}]}</code></pre>
                    </li>
                    <li>設定被乘數(base值)：
                        <pre><code>/data modify entity @s Attributes[{Name:"minecraft:generic.max_health"}].Base set value 10.9</code></pre>
                    </li>
                    <li> 設定乘數(Amount值)：
                        <pre><code>/data modify entity @s Attributes[{Name:"minecraft:generic.max_health"}].Modifiers[{Name:"multiply"}].Amount set value 5.1</code></pre>
                    </li>
                </ol>
                <p>※請注意，1.16對於生物的Attributes格式略有規則上的更改：<br>
                    部分屬性會被「隱藏」起來，如attack_damage最為常見(最常被隱藏)，<br>
                    可以將生物加上一個modifier再移除的方式來確保該屬性能出現於Attributes的列表中。
                </p>
                <h4>如何存取最後的計算結果值</h4>
                <p>在上述步驟，我們已經完成在屬性中進行計算的過程，<br>
                    接下來最主要的問題則是：需要怎麼做才能取得此屬性最後輸出的結算值(在當前的生物標籤中，並沒有任何一項標籤能表示某個屬性的屬性值)。<br>
                    於是我們在此一共會介紹2種取得屬性結算值做法：
                </p>
                <p>〔1.16↑〕欲取得結算值(最終屬性值)可以利用指令：/attribute ... get [&lt;scale&gt;] <br>
                    通常會搭配execute store，如：/execute store result score ... run attribute ... get [&lt;scale&gt;]<br><br>

                    〔1.14↑〕相對於使用attribute get的效果，此方式取得結算值的限制非常大，<br>
                    若欲取得屬性(max_health的結算值，需使用2步驟：<br></p>
                <ol>
                    <li>覆蓋Health的數值，使之數值與max_health值相等：data merge entity ... {Health:1024.0f}</li>
                    <li>
                        <ul>
                            <li>取得Health的數值(get)：data get entity ... Health [&lt;scale&gt;]</li>
                            <li>轉移Health的數值(set from)：/data modify entity ... set from entity ... Health</li>
                        </ul>
                    </li>
                </ol>
                <p>使用此種取得結算值的作法需要注意以下幾點：</p>
                <ol>
                    <li>如果Health給予的值比maxHealth的值還要大，Health就會被替換為maxHealth值(這個替換是立即的，不需間隔tick)</li>
                    <li>Health值的最大限制是1024.0f，即使maxHealth的值可以比1024.0d還要大。</li>
                    <li>由於是改變生物Health的方式，不得儲存0.0以下的數值(這會導致生物直接死亡而無法存取數值)。</li>
                    <li>請注意資料型態的變換：Health為float、maxHealth的值為double</li>
                </ol>
                <p> (1.14↑取結果值的作法，目前只能想到用Health)</p>
                <i>若讀者有其他想法與做法請務必向我們提出和建議owo</i>

            </section>
            <div class="fb-comments" data-href="https://www.dreamcity.studio/resources/decimal_operation" data-width="600" data-numposts="5"></div>

        </div>



    </section>

    <!-- Footer -->
    <footer id="footer">
        <div class="inner">
            <ul class="icons">
                <li><a target="_blank" href="https://www.facebook.com/dreamcity26481414/" class="icon alt fa-facebook"><span class="label">Facebook</span></a></li>
                <li><a target="_blank" href="https://www.instagram.com/dream_city.1125/" class="icon alt fa-instagram"><span class="label">Instagram</span></a></li>
                <li><a target="_blank" href="https://www.youtube.com/channel/UCEdc-bRjpqlpY_NTfy_vR1w" class="icon alt fa-youtube"><span class="label">Youtube</span></a></li>
                <li><a target="_blank" href="https://www.facebook.com/groups/275327213254057/?source_id=731386903640536" class="icon alt fa-group"><span class="label">FacebookGroups</span></a></li>
            </ul>
            <ul class="copyright">
                <oi>&copy; 2021 夢想之都工作室 | </oi>
                <oi><a target="_blank" href="https://go.dreamcity.studio/donate">小額贊助 | </a></oi>
                <oi><a target="" href="../map/">地圖作品 | </a></oi>
                <oi><a target="" href="/about/">關於夢都</a></oi>
            </ul>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

</body>

</html>
